# 프로세스 & 쓰레드

## 사전지식

### OS

- 여러 프로세스가 동시에 실행될수 있도록 지원해주는 공간
- EX: 협회, 리그라고 생각하면 됨 -> 리그에서 매치의 일정을 잡아주고, 그 매치가 문제없이 진행되록 심판,경기장,방송사등을 매칭해줌
  - 특히 각 경기 일정이 겹치지 않도록 스케쥴링 해주는 관점에서 OS와 비슷

### 프로그램

- 프로그램이란 디스크에 저장된 “실행 파일(코드)”로, “어떤 기능을 어떻게 동작시킬 것”을 정적으로 기술
- EX: 구단의 전술은 “어떤 전형(포메이션)으로 뛸 것인지, 어떤 식으로 공격·수비를 전개할 것인지” 등이 문서·전략 자료로 정적으로 기록되어 있는 상태
  - 이 전술은 아직 경기가 시작되기 전까지는 실제로 ‘진행 중’인 게 아니고, 어디까지나 “이렇게 하면 되겠다”라는 설계 단계
- 이게 핵심: 전술(프로그램)은 경기 전에 “어떻게 플레이할지”를 구상하고 문서화해둔 것일 뿐, 실제 경기(프로세스)가 시작(실행)되지 않으면 아무런 활동도 하지 않음

## 프로세스

- 프로세스란 OS에서 자원을 할당받아 실제로 독립적으로 실행되는 프로그램 인스턴스
- EX: 경기가 실제로 시작되면, 구장(자원), 심판, 공, 관중석 등 리그(운영체제)로부터 여러 자원을 할당받아 독립적으로 진행
  - 같은 시간대에 다른 구장에서는 또 다른 경기를 진행할 수 있지만, 각 경기는 기본적으로 자기 구장·심판·선수들이 겹치지 않도록 분리되어 독립적으로 돌아감

## 쓰레드

- 쓰레드란 프로세스 내부에서 병렬적으로 작업을 처리하는 실행 흐름 단위
- EX: 한 경기(프로세스) 안에는 여러 선수가 같은 팀 유니폼(공유 자원)을 입고, 같은 구장(공유 메모리)을 쓰고, 같은 골대를 향해 협력(같은 데이터·목표)하지만, 각 선수는 동시에 다른 동작을 수행(드리블, 패스, 수비, 공격 등)할 수 있음

## 프로세스 - 쓰레드

> 같은 프로세스의 여러 스레드는 메모리와 자원(파일, 소켓 등)을 공유하지만, 서로 다른 프로세스는 기본적으로 메모리를 공유하지 않음

- 하나의 진행중인 경기에서 여러 선수들이 구장, 유니폼등을 공유하지만, 서로 다른 진행중인 경기끼리는 유니폼이나 경기장을 공유하지 않는다는 것을 생각하면 쉽게 이해됨

> 스레드는 경량(lightweight) 실행 단위로 빠른 문맥 교환이 가능하고, 프로세스는 무거운 실행 단위로 서로 격리되어 안정성을 제공

- 선수를 교체해도 현재 진행중인 경기에서 공유되고있는 경기장과 유니폼을 그대로 사용하는것은 당연하니 => 선수 교체(쓰레드 문맥 교환)은 가벼움
- 반면 하나의 경기 일정을 교체하려면 경기장,심판,방송일정등을 다시 잡아야함 => 경기 일정 교체(프로세스 문맥 교환)은 무거움

> 문맥 교환이란 하나의 프로세스(또는 쓰레드)가 자장 <-> 복구 과정을 거치는 것을 말함

- 다른 예시 => 하나의 컴퓨터에서 게임과 크롬을 동시에 틀어놓은 상태를 가정

1. 게임 프로세스 안에서 여러 스레드가 역할에 맞춰 동작하고 있음.
2. 사용자 ALT+TAB(또는 클릭) 등으로 크롬 프로세스를 선택하면, 운영체제 입장에서는 “게임 → 크롬” 간 프로세스 전환을 수행해야 함.
3. 이때 게임 프로세스의 현재 실행 상태(문맥)는 PCB 같은 운영체제 자료구조에 저장.
4. 크롬 프로세스의 기존 문맥 정보를 같은 자료구조에서 찾아서 복원하면, CPU는 크롬이 멈췄던 시점에서 계속 실행할 수 있음.
5. 이후에도 동일한 원리로 게임 ↔ 크롬 간 전환을 계속 반복하며, 이전 상태가 그대로 유지된 채로 이어서 실행됨.
