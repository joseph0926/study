<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì‹¤í—˜ 2.2: ë¸”ë¡œí‚¹ ì½”ë“œê°€ íƒ€ì´ë¨¸ì— ë¯¸ì¹˜ëŠ” ì˜í–¥</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 900px;
      margin: 50px auto;
      padding: 20px;
      background-color: #f5f5f5;
    }

    .container {
      background-color: white;
      border-radius: 8px;
      padding: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    h1 {
      color: #333;
      border-bottom: 3px solid #007acc;
      padding-bottom: 10px;
    }

    .section {
      margin: 25px 0;
      padding: 20px;
      border-radius: 6px;
    }

    .prediction {
      background-color: #fff3cd;
      border-left: 4px solid #ffc107;
    }

    .code {
      background-color: #f4f4f4;
      border-left: 4px solid #666;
      font-family: 'Courier New', monospace;
      padding: 15px;
      overflow-x: auto;
    }

    .result {
      background-color: #d1ecf1;
      border-left: 4px solid #17a2b8;
    }

    .instruction {
      background-color: #d4edda;
      border-left: 4px solid #28a745;
    }

    .warning {
      background-color: #f8d7da;
      border-left: 4px solid #dc3545;
    }

    h2 {
      margin-top: 0;
      color: #555;
    }

    pre {
      margin: 10px 0;
      white-space: pre-wrap;
    }

    .highlight {
      background-color: #ffeb3b;
      padding: 2px 4px;
      font-weight: bold;
    }

    #timeline {
      font-family: monospace;
      background-color: #f9f9f9;
      padding: 15px;
      margin-top: 15px;
      border-radius: 4px;
      white-space: pre;
    }

    .freeze-indicator {
      color: #dc3545;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ì‹¤í—˜ 2.2: ë¸”ë¡œí‚¹ ì½”ë“œê°€ íƒ€ì´ë¨¸ì— ë¯¸ì¹˜ëŠ” ì˜í–¥</h1>

    <div class="section prediction">
      <h2>ğŸ“ ë‹¹ì‹ ì˜ ì˜ˆì¸¡</h2>
      <p><strong>í•µì‹¬ ì§ˆë¬¸:</strong> "timeout"ì€ ì–¸ì œ ì¶œë ¥ë˜ëŠ”ê°€?</p>
      <p><strong>ì˜ˆì¸¡:</strong> ì•½ 3ì´ˆ í›„ (ë¸”ë¡œí‚¹ ì™„ë£Œ ì§í›„)</p>
      <p><strong>í•µì‹¬ ë…¼ë¦¬:</strong></p>
      <ul>
        <li>setTimeout ìì²´ëŠ” ì¦‰ì‹œ ì‹¤í–‰ â†’ íƒ€ì´ë¨¸ ì‹œì‘</li>
        <li>íƒ€ì´ë¨¸ëŠ” ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì§„í–‰ (1ì´ˆ)</li>
        <li>while ë£¨í”„ê°€ Call Stack ì ìœ  (3ì´ˆ)</li>
        <li>íƒ€ì´ë¨¸ ì™„ë£Œë˜ì§€ë§Œ Call Stackì´ ë¹„ì–´ìˆì§€ ì•Šì•„ ì‹¤í–‰ ëª»í•¨</li>
        <li>while ì™„ë£Œ â†’ Call Stack ë¹„ì›€ â†’ ì½œë°± ì‹¤í–‰</li>
      </ul>
    </div>

    <div class="section code">
      <h2>ğŸ’» ì‹¤í—˜ ì½”ë“œ</h2>
      <pre>console.log('ì‹œì‘');
setTimeout(() => console.log('timeout'), 1000);
console.log('ë¸”ë¡œí‚¹ ì‹œì‘');
const start = Date.now();
while (Date.now() - start < 3000) {} // 3ì´ˆ ë¸”ë¡œí‚¹
console.log('ë¸”ë¡œí‚¹ ë');</pre>
    </div>

    <div class="section warning">
      <h2>âš ï¸ ì£¼ì˜ì‚¬í•­</h2>
      <p><strong>ì´ ì‹¤í—˜ì€ ë¸Œë¼ìš°ì €ë¥¼ 3ì´ˆê°„ í”„ë¦¬ì§•ì‹œí‚µë‹ˆë‹¤!</strong></p>
      <ul>
        <li>ì‹¤í–‰ ì¤‘ ë¸Œë¼ìš°ì €ê°€ ì‘ë‹µí•˜ì§€ ì•ŠìŒ</li>
        <li>ë§ˆìš°ìŠ¤/í‚¤ë³´ë“œ ì…ë ¥ ë¬´ì‹œë¨</li>
        <li>3ì´ˆ í›„ ì •ìƒ ë³µê·€</li>
        <li>ì´ê²ƒì´ "ë¸”ë¡œí‚¹"ì˜ ì˜ë¯¸ì…ë‹ˆë‹¤</li>
      </ul>
    </div>

    <div class="section instruction">
      <h2>ğŸ” ê´€ì°° í¬ì¸íŠ¸</h2>
      <p><strong>ê°œë°œì ë„êµ¬ë¥¼ ì—´ì–´ì£¼ì„¸ìš” (F12 ë˜ëŠ” Cmd+Opt+I)</strong></p>
      <ol>
        <li>Console íƒ­ì—ì„œ ê° ë©”ì‹œì§€ì˜ <strong>íƒ€ì„ìŠ¤íƒ¬í”„</strong> í™•ì¸</li>
        <li>"timeout"ì´ ì–¸ì œ ì¶œë ¥ë˜ëŠ”ì§€ ì •í™•íˆ ì¸¡ì •</li>
        <li>ë¸Œë¼ìš°ì €ê°€ í”„ë¦¬ì§•ë˜ëŠ” ìˆœê°„ ì²´ê°</li>
        <li>ì˜ˆì¸¡(3ì´ˆ í›„)ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸</li>
      </ol>
    </div>

    <div class="section result">
      <h2>âœ… ì‹¤ì œ ê²°ê³¼</h2>
      <p>ì½˜ì†”ì˜ íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ í™•ì¸í•˜ì„¸ìš”!</p>
      <div id="timeline"></div>
    </div>
  </div>

  <script>
    console.log("=== ì‹¤í—˜ 2.2 ì‹œì‘ ===\n");

    const experimentStart = Date.now();

    // ì‹¤í—˜ ì½”ë“œ
    console.log('ì‹œì‘', `(${Date.now() - experimentStart}ms)`);

    setTimeout(() => {
      const timeoutTime = Date.now() - experimentStart;
      console.log('timeout', `(${timeoutTime}ms)`);

      document.getElementById('timeline').innerHTML +=
        `\n"timeout" ì¶œë ¥: ${timeoutTime}ms\n` +
        `ì˜ˆìƒ: ~1000ms\n` +
        `ì‹¤ì œ: ~3000ms\n` +
        `\n<span class="highlight">ê²°ë¡ : íƒ€ì´ë¨¸ëŠ” 1ì´ˆì— ì™„ë£Œë˜ì—ˆì§€ë§Œ,\n` +
        `Call Stackì´ ë¹„ëŠ” 3ì´ˆê¹Œì§€ ê¸°ë‹¤ë ¸ìŠµë‹ˆë‹¤!</span>`;
    }, 1000);

    console.log('ë¸”ë¡œí‚¹ ì‹œì‘', `(${Date.now() - experimentStart}ms)`);
    console.log('%câš ï¸ ë¸Œë¼ìš°ì €ê°€ 3ì´ˆê°„ í”„ë¦¬ì§•ë©ë‹ˆë‹¤...', 'color: red; font-weight: bold');

    const blockStart = Date.now();
    while (Date.now() - blockStart < 3000) {
      // 3ì´ˆ ë¸”ë¡œí‚¹
      // ì´ ë™ì•ˆ Call Stackì€ ë¹„ì–´ìˆì§€ ì•ŠìŒ
      // Event LoopëŠ” Task Queueë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŒ
    }

    const blockEnd = Date.now() - experimentStart;
    console.log('ë¸”ë¡œí‚¹ ë', `(${blockEnd}ms)`);

    console.log("\n=== ì‹¤í—˜ 2.2 ì¢…ë£Œ ===");
    console.log("\në¶„ì„:");
    console.log("1. 'ì‹œì‘'ê³¼ 'ë¸”ë¡œí‚¹ ì‹œì‘'ì€ ê±°ì˜ ë™ì‹œ? (ë™ê¸° ì½”ë“œ)");
    console.log("2. 'ë¸”ë¡œí‚¹ ë'ì€ ì•½ 3ì´ˆ í›„?");
    console.log("3. 'timeout'ì€ 'ë¸”ë¡œí‚¹ ë' ì§í›„? (ì•½ 3ì´ˆ í›„)");
    console.log("4. íƒ€ì´ë¨¸ëŠ” 1ì´ˆì˜€ëŠ”ë° ì™œ 3ì´ˆ í›„ì— ì‹¤í–‰?");

    // íƒ€ì„ë¼ì¸ í‘œì‹œ
    document.getElementById('timeline').innerHTML =
      `íƒ€ì„ë¼ì¸:\n` +
      `0ms: ì‹œì‘\n` +
      `~0ms: setTimeout ì‹¤í–‰ (íƒ€ì´ë¨¸ ì‹œì‘)\n` +
      `~0ms: ë¸”ë¡œí‚¹ ì‹œì‘\n` +
      `~1000ms: íƒ€ì´ë¨¸ ì™„ë£Œ (í•˜ì§€ë§Œ Call Stack ì ìœ  ì¤‘)\n` +
      `~3000ms: ë¸”ë¡œí‚¹ ë (Call Stack ë¹„ì–´ì§)\n` +
      `~3000ms: "timeout" ì¶œë ¥`;
  </script>
</body>
</html>
